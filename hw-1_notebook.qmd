---
title: "Homework assignment 1"
author: "Mikayla Lalli"
format: pdf
---

## 1. Install the **babynames** package

```{r message=FALSE, warning=FALSE}
# Load required libraries
library(babynames)
library(tidyverse)
```

## 2. How many variables and observations does this package contain?

```{r}
# Inspect the data
data("babynames")
glimpse(babynames)
```

The babynames package contains 1,924,665 observations and 5 variables.

## 3. Create a data dictionary for each of the variables that includes the variable name, data type, and a description.

| Variable name | Type | Description |
|------------------|------------------|------------------------------------|
| name | Character | Name of person at birth |
| year | Numeric (double) | Birth year |
| sex | Character | Sex of person at birth |
| n | Numeric (integer) | Number of applicants of a given sex with a given name born in a given year |
| prop | Numeric (double) | Proportion of people of a given sex with a given name born in a given year |

## 4. What is the range of years covered in babynames?

```{r message=FALSE, warning=FALSE}
(range(babynames$year))
```

The range of years covered is 1880-2017

## 5. Create an object from the babynames package that does not include the variable n

```{r message=FALSE, warning=FALSE}
babynames_new <- select(babynames, -n)
```

## 6. What is one reason for not including n, but keeping the variable prop?

Since the proportions are relative to the number of applicants born in the given year and the total number of people born each year is not readily available to us, the proportion data would be more meaningful/useful for making comparisons across birth years. Count data are absolute frequencies while proportions provide relative frequencies which can be compared across conditions with differing numbers of observations.

## 7. Using the object created in Question 5, what was the most popular name for both sexes in:

### a) the 2nd millennium?

```{r message=FALSE, warning=FALSE}
babynames_mil_2 <- babynames_new |> 
  filter(year >= 1900, year <= 1999) |> 
  group_by(name, sex) |> 
  summarize(prop = sum(prop)) |>
  group_by(sex) |> 
  filter(prop == max(prop))
babynames_mil_2
```

In the second millennium, the most popular name for males was John and for females was Mary.

### b) the 3rd millennium?

```{r message=FALSE, warning=FALSE}
babynames_mil_3 <- babynames_new |> 
  filter(year >= 2000, year <= 2017) |> 
  group_by(name, sex) |> 
  summarize(prop = sum(prop)) |>
  group_by(sex) |> 
  filter(prop == max(prop))
babynames_mil_3
```

In the third millennium, the most popular name for males was Jacob and for females was Emma.

## 8. What were the most popular names beginning with the letters Q, V, and X between 2000 and 2012?

```{r message=FALSE, warning=FALSE}
names_2000_2012 <- babynames_new |> 
  filter(year >= 2000, year <= 2012) |>
  group_by(name) |> 
  summarize(prop = sum(prop)) |> 
  filter(substr(name, 1, 1) %in% c("Q", "V", "X")) |>
  group_by(letter = substr(name, 1, 1)) |> 
  filter(prop == max(prop))
names_2000_2012
```

Between 2000 and 2012, the most popular name beginning with Q was Quinn, V was Victoria, and X was Xavier.

## 9. Create a new object that retains all the variables of the babynames package, but create a new column that contains the decade each year is a part of named decade.

```{r message=FALSE, warning=FALSE}
babynames_decades <- babynames |> 
  mutate(decade = paste0(substr(babynames$year, 1, 3), "0"))
```

## 10. What is the mean and median number of female and male babies in each decade?

```{r message=FALSE, warning=FALSE}
females <- babynames_decades |> 
  filter(sex == "F") |> 
  summarize(mean = mean(n), median = median(n), .by = decade)

males <- babynames_decades |> 
  filter(sex == "M") |> 
  summarize(mean = mean(n), median = median(n), .by = decade)
```

```{r message=FALSE, warning=FALSE}
#| layout-ncol: 2
#| tbl-subcap: ["Females", "Males"]

knitr::kable(females, col.names = c("Decade", "Mean", "Median"), caption = "Females")
knitr::kable(males, col.names = c("Decade", "Mean", "Median"), caption = "Males")
```

## 11. In which decade(s) and year(s), was:

```{r message=FALSE, warning=FALSE}
popular_names_year <- babynames_decades |> 
  filter(name %in% c("Mikayla", "Michael", "Jack", "Scott")) |>
  group_by(name) |> 
  filter(prop == max(prop))
popular_names_year

popular_names_decade <- babynames_decades |> 
  group_by(decade, name) |> 
  summarize(prop = sum(prop)) |> 
  filter(name %in% c("Mikayla", "Michael", "Jack", "Scott")) |> 
  group_by(name) |> 
  filter(prop == max(prop))
popular_names_decade
```

### a) your name the most popular?

Mikayla was most popular in the year 1998, and in the decade 2000

### b) your supervisor’s name the most popular?

Michael was most popular in the year 1969, and in the decade 1960.

### c) Mike’s kids’ names, Jack and Scott, the most popular?

Jack was most popular in the year 1927, and in the decade 1920. Scott was most popular in the year 1971, and in the decade 1960.
